<hsml>
  <head></head>

  <space>
    <!-- Se mantiene est치tico -->
    <include src="testing/houseTest.html" data-title="Sala de pruebas: Modelos"/>

  </space>

  <script>
    // ========= Config =========
    const MODELS = [
      { name: 'vr_art.glb',         src: 'models/vr_art.glb' },
      { name: 'abandoned_brick.glb', src: 'models/abandoned_brick.glb' },
      { name: 'white.glb', src: 'models/white.glb?2' },
      { name: 'Sims4_TinyLivingPack_1_0.glb', src: 'models/Sims4_TinyLivingPack_1_0.glb' },
    ];

    const BTN = {
      startX: -1.5,   // X inicial
      stepX:  1.6,    // separaci칩n horizontal
      z:      -5.0,   // Z fija para la fila
      y:       1,  // altura del bot칩n
      w:       1,   // ancho
      h:       1,  // alto
      d:       1    // profundidad
    };

    const STAGE_POS = { x: 0, y: 0.001, z: -2.2, scale: 1 };

    // ========= L칩gica =========
    let currentModelId = 'loadedModel';
    function spawnModel(src){
      const existing = dimension.get(currentModelId);
      if (existing){
         dimension.remove(existing);
      }

      const model = dimension.create('model', {
        id: currentModelId,
        src,
        x: STAGE_POS.x, y: STAGE_POS.y, z: STAGE_POS.z,
        scale: STAGE_POS.scale
      });
      dimension.appendChild(model);
    }

    MODELS.forEach((item, i)=>{
      const x = BTN.startX + i * BTN.stepX;

      const btn = dimension.create('box', {
        width: BTN.w, height: BTN.h, depth: BTN.d,
        x, y: BTN.y, z: BTN.z,
        color: '#3a3a3a',
        collider: 'true'
      });

      const label = dimension.create('text', {
        text: item.name,
        fontSize: 28,
        color: '#ffffff',
        unitsperpx: 0.002,
        x, y: BTN.y + 0.22, z: BTN.z
      });

      btn.addEventListener('toque', ()=>{
        spawnModel(item.src);
        btn.setAttribute('color', '#5c6bc0'); 
        setTimeout(()=> btn.setAttribute('color', '#3a3a3a'), 200);
      });

      dimension.appendChild(btn);
      dimension.appendChild(label);
    });

    if (MODELS.length) spawnModel(MODELS[0].src);
  </script>
</hsml>
